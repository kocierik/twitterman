"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var jsx_runtime_1 = require("react/jsx-runtime");
var date_fns_1 = require("date-fns");
var react_1 = require("react");
var styled_components_1 = __importDefault(require("styled-components"));
var DatePicker_1 = require("./DatePicker");
var useDayCell_1 = require("./hooks/useDayCell");
var MonthTable_1 = require("./MonthTable");
var mixin_1 = require("./styles/mixin");
var theme_1 = __importDefault(require("./styles/theme"));
var checkIsPreviousDay = function (_a) {
    var year = _a.year, month = _a.month, day = _a.day;
    if (!day) {
        return true;
    }
    var currentCellDate = new Date(year, month - 1, day);
    var today = (0, date_fns_1.startOfDay)(new Date());
    return today > currentCellDate;
};
function DayCell(_a) {
    var day = _a.day;
    var _b = (0, react_1.useContext)(MonthTable_1.YearMonthContext), year = _b[0], month = _b[1];
    var _c = (0, useDayCell_1.useDayCell)({ year: year, month: month, day: day }), isSelected = _c.isSelected, isBetweenPickedDates = _c.isBetweenPickedDates, isFirstPickedDate = _c.isFirstPickedDate, isSecondPickedDate = _c.isSecondPickedDate, onClickDayCell = _c.onClickDayCell;
    var isPreviousDaysDisabled = (0, react_1.useContext)(DatePicker_1.DisablePreviousDaysContext);
    var isPreviousDay = checkIsPreviousDay({ year: year, month: month, day: day });
    var onKeyUpDayCell = function (e) {
        if (e.key !== 'Enter') {
            return;
        }
        onClickDayCell();
    };
    return ((0, jsx_runtime_1.jsx)(S.CellLayer, __assign({ isBetweenPickedDates: !!day && isBetweenPickedDates, isFirstPickedDate: isFirstPickedDate, isSecondPickedDate: isSecondPickedDate }, { children: day && ((0, jsx_runtime_1.jsx)(S.Cell, __assign({ tabIndex: isPreviousDay ? undefined : 0, onClick: onClickDayCell, onKeyUp: onKeyUpDayCell, isSelected: isSelected, disabled: isPreviousDaysDisabled && isPreviousDay }, { children: day }))) })));
}
var S = {
    CellLayer: styled_components_1.default.td(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n    width: 48px !important;\n    height: 48px !important;\n\n    // \uCCB4\uD06C\uC778, \uCCB4\uD06C\uC544\uC6C3 \uBAA8\uB450 \uC120\uD0DD\uB41C \uACBD\uC6B0\n\n    // \uCCB4\uD06C\uC778 <= CellLayer <= \uCCB4\uD06C\uC544\uC6C3\uC778 \uACBD\uC6B0\n    //background-color: ", ";\n    ", ";\n\n    // CellLayer\uAC00 firstDayOfMonth\uC778 \uACBD\uC6B0\n    //background: linear-gradient(to left, ", ", ", ");\n\n    // CellLayer\uAC00 lastDayOfMonth\uC778 \uACBD\uC6B0\n    //background: linear-gradient(to right, ", ", ", ");\n\n    // \uCCB4\uD06C\uC778 \uBC84\uD2BC\uC778 \uACBD\uC6B0\n    ", "\n\n    // \uCCB4\uD06C\uC544\uC6C3 \uBC84\uD2BC\uC778 \uACBD\uC6B0\n    ", "\n  "], ["\n    width: 48px !important;\n    height: 48px !important;\n\n    // \uCCB4\uD06C\uC778, \uCCB4\uD06C\uC544\uC6C3 \uBAA8\uB450 \uC120\uD0DD\uB41C \uACBD\uC6B0\n\n    // \uCCB4\uD06C\uC778 <= CellLayer <= \uCCB4\uD06C\uC544\uC6C3\uC778 \uACBD\uC6B0\n    //background-color: ", ";\n    ", ";\n\n    // CellLayer\uAC00 firstDayOfMonth\uC778 \uACBD\uC6B0\n    //background: linear-gradient(to left, ", ", ", ");\n\n    // CellLayer\uAC00 lastDayOfMonth\uC778 \uACBD\uC6B0\n    //background: linear-gradient(to right, ", ", ", ");\n\n    // \uCCB4\uD06C\uC778 \uBC84\uD2BC\uC778 \uACBD\uC6B0\n    ", "\n\n    // \uCCB4\uD06C\uC544\uC6C3 \uBC84\uD2BC\uC778 \uACBD\uC6B0\n    ", "\n  "])), theme_1.default.color.gray6, function (_a) {
        var isBetweenPickedDates = _a.isBetweenPickedDates;
        return isBetweenPickedDates &&
            "\n      background-color: ".concat(theme_1.default.color.gray6, ";\n    ");
    }, theme_1.default.color.gray6, theme_1.default.color.white, theme_1.default.color.gray6, theme_1.default.color.white, function (_a) {
        var isFirstPickedDate = _a.isFirstPickedDate;
        return isFirstPickedDate &&
            "\n      border-top-left-radius: 50%;\n      border-bottom-left-radius: 50%;\n    ";
    }, function (_a) {
        var isSecondPickedDate = _a.isSecondPickedDate;
        return isSecondPickedDate &&
            "\n      border-top-right-radius: 50%;\n      border-bottom-right-radius: 50%;\n    ";
    }),
    Cell: styled_components_1.default.div(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n    ", ";\n    height: 100%;\n    border: 1px solid transparent;\n    border-radius: 50%;\n    cursor: pointer;\n    transition: all 100ms;\n    font-size: ", " !important;\n\n    &:hover {\n      border-color: ", ";\n    }\n\n    // isDisabled === true\n    ", "\n    //\n\n    // \uD074\uB9AD\uC2DC\n    ", "\n  "], ["\n    ", ";\n    height: 100%;\n    border: 1px solid transparent;\n    border-radius: 50%;\n    cursor: pointer;\n    transition: all 100ms;\n    font-size: ", " !important;\n\n    &:hover {\n      border-color: ", ";\n    }\n\n    // isDisabled === true\n    ", "\n    //\n\n    // \uD074\uB9AD\uC2DC\n    ", "\n  "])), mixin_1.mixin.flexbox({ ai: 'center', jc: 'center' }), theme_1.default.fontSize.xs, theme_1.default.color.gray1, function (_a) {
        var disabled = _a.disabled;
        return disabled &&
            "\n       pointer-events: none;\n       color: ".concat(theme_1.default.color.gray4, ";\n    ");
    }, function (_a) {
        var isSelected = _a.isSelected;
        return isSelected &&
            "\n        background-color: ".concat(theme_1.default.color.gray1, ";\n        color: ").concat(theme_1.default.color.white, ";\n      ");
    }),
};
exports.default = (0, react_1.memo)(DayCell);
var templateObject_1, templateObject_2;
//# sourceMappingURL=DayCell.js.map